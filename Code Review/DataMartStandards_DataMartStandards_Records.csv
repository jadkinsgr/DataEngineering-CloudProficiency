ModifiedDTS,ModifiedUserNM,StandardNM,DisplayNM,DescriptionTXT,RationaleTXT,CategoryDSC,AdoptionDTS,ActiveFLG,ApplyToSourceFLG,ApplyToDataMartFLG,ClientSpecificFLG,EnforcementLevelDSC,AutomationLevelDSC
7/13/23 7:35,joshua.adkins@healthcatalyst.cloud,SAM Name Must Match Schema Name,SAM Name Must Match Schema Name,The name of this schema should be identical to the name of the SAM. White spaces do not matter. This does not apply to SAMs writing to the Shared database.,"We would like it to be clear which SAM a given entity came from and is maintained by. 
This also reduces the risk of entity naming overlap within a schema, if multiple SAMs were to be writing entities to that schema.",Naming Conventions,1/1/19 0:00,FALSE,FALSE,TRUE,FALSE,Required,Automated
7/13/23 7:35,joshua.adkins@healthcatalyst.cloud,SAM Entity Dependencies Must Flow From Left To Right,SAM Entity Dependencies Must Flow From Left To Right,"SAM data should 'flow' from Events through to Summaries and Reporting Views in one-direction.  Designs that flow 'backwards' should be re-examined for necessity of such a pattern.

 - Events should only pull from outside sources/SAMs and from other Events 
 - Rules should only pull from outside sources/SAMs, Events, and other Rules 
 - Populations should only pull from outside sources/SAMs, Event, Rules and other Populations 
 - Metrics/Premetrics should only pull from outside sources/SAMs, Events, Rules, Populations and other Metrics/Premetrics 
 - Summaries can pull from everywhere, including other summaries within the SAM, with some additional guidance: 
    - All summaries should be used - intermediary summaries that are not end products should be reviewed to see if they should be broken out differently (not automated)
    - Summaries should not pull from PreMetric entities, as these are not intended to be final calculations. (not automated)",A standard concept amongst developers of how data should flow will greatly aid in generalist troubleshooting.  Most deviations from this pattern can be reconstructed correctly with no impact to performance or results.,Design Conventions,1/1/19 0:00,FALSE,FALSE,TRUE,FALSE,Best Practice,Automated
7/13/23 7:35,joshua.adkins@healthcatalyst.cloud,SAM End Point Entities Must Be Marked As Public,SAM End Point Entities Must Be Marked As Public,Marking an entity as public within a SAM allows it to be used by other SAMs.,"Since end-point entities are considered user facing for use by reports, dashboards, direct SQL, etc...It is recommended to just mark all end-point entities public right away. Rather than wait until a downstream SAM needs it, and then have to go back in and mark as public in dev (then carry forward to production). And entity must be marked as public in order to be consumable by downstream SAMs.",Design Conventions,1/1/19 0:00,TRUE,FALSE,TRUE,FALSE,Required,Automated
7/13/23 7:35,joshua.adkins@healthcatalyst.cloud,Data Mart Primary Support Documented,Data Marts Must Have Primary Support Documented In Metadata Tags,"Using the standards tags (per example below), a Primary Support person should be documented for each data mart. This person would be the go to person to triage any issues/questions that emerge for the data mart.   

****************************** 

SAM Documentation 

****************************** 

[Business Owner / SME]: 

[Primary Support Contact]:

[Secondary Support Contact]: 

******************************","As issues/questions emerge that the EDW team has to deal with, it's important to have clear contacts documented, so they know who to reach out to when specific data marts have things come up.",Metadata,1/1/19 0:00,FALSE,TRUE,TRUE,FALSE,Required,Automated
7/13/23 7:35,joshua.adkins@healthcatalyst.cloud,Non Active Data Mart Entities,Data Marts Moving To Production Should Only Contain Active Entities,Entities that don't have bindings in a status of active will not run (even if they are scheduled via EDW Console).,"To eliminate confusion with regards to production metadata, schedules, and source code. The preference is for all production data marts to only contain live entities that are ""production ready"" and will be run regularly. If non-active entities are carried forward to production, they will show up in metadata, but not run, and thus may confuse users who are going off what they see in Atlas. It also may not be clear which production entities were deliberately set to inactive due to temporary errors, vs were always in an inactive state, because they moved with other development that was ready.",Production Readiness,1/1/19 0:00,TRUE,TRUE,TRUE,FALSE,Required,Automated
7/13/23 7:35,joshua.adkins@healthcatalyst.cloud,Data Mart Business Owner Documented,Data Marts Must Have Business Owner Documented In Metadata Tags,"Using the standards tags (per example below), one or more business owner should be documented for each data mart. If this is a Shared data mart, this should specify something like ""Varies by entity."" or ""APR Wide.""  

****************************** 

SAM Documentation 

****************************** 

[Business Owner / SME]: 

[Primary Support Contact]:

[Secondary Support Contact]: 

******************************","Capturing the business owner for a given data mart is helpful in knowing who to reach out to if issues/questions emerge. As developers come and go, this will help us maintain track of who data marts originate for, and who in the business owns or can speak to the business logic.",Metadata,1/1/19 0:00,FALSE,TRUE,TRUE,FALSE,Required,Automated
7/13/23 7:35,joshua.adkins@healthcatalyst.cloud,Bindings Must Reference Views Over Tables,Bindings Must Reference Views Over Tables,"Typically a table form of an entity exists (suffixed by BASE) as well as a view (without the BASE suffix). The view should always be used instead of the table where possible. 

Note: This does not apply to IDEA sourced tables (as there is security which blocks records out of views based on underlying app access) - Either BASE or the view can be used, with a recommendation to use BASE to avoid confusion when switching between SAMD and SSMS.","It's possible that an entity may be persisted at one point in time (table + view exists), but at a future point in time it could become non-persisted (only the view exists). Always referencing the view cuts out the risk of code breaking because an entity switches to non-persisted. It also simplifies code sharing, in the event that at some point in the future a subset of users only has access to the views, and not the underlying BASE tables.",SQL Conventions,1/1/19 0:00,TRUE,FALSE,TRUE,FALSE,Required,Automated
7/13/23 7:35,joshua.adkins@healthcatalyst.cloud,End Point Entities Have Clustered Unique Index,End Point Entities Must Have Clustered Unique Index,"All end-point entities must have a primary key or clustered unique index added. For Source Mart entities this includes everything that is not a History or Raw table. For SAMs this includes Summaries and Reporting Views, as well as all entities marked Public or in a Generic Framework SAM.","In order to ensure the grain of the data is as expected, all end-point entities should have a primary key or clustered unique index added.",Design Conventions,1/1/19 0:00,TRUE,TRUE,TRUE,FALSE,Best Practice,Automated
7/13/23 7:35,joshua.adkins@healthcatalyst.cloud,Obsolete SAM Entities Must Be Deleted,Obsolete SAM Entities Must Be Deleted,"If objects exist in the SAM database, but are not tracked in metadata, they are considered obsoleted. This means at one point in time they were created via SAMD, but have since been deleted via the tool.",It is important to keep the environment clean of obsolete objects to reduce noise and avoid the risk confusion.,Environment Cleanup,1/1/19 0:00,FALSE,FALSE,TRUE,FALSE,Required,Automated
7/13/23 7:35,joshua.adkins@healthcatalyst.cloud,Last Full SAM Run Not Successful,,"When a SAM is promoted, typically we require the last full run to be successful.","If the last full run was not successful, it might indicate changes that were not fully tested or verified to be ok for production.",Production Readiness,1/1/19 0:00,TRUE,FALSE,TRUE,FALSE,Required,Automated
7/13/23 7:35,joshua.adkins@healthcatalyst.cloud,Last Full SAM Run Over 60 Minutes,,"For daily SAMs, our general standard is that they be 1 hour or less to move to production. Otherwise tuning may be required. Check the general average of the past 2-3 runs as well","We have many SAMs running in production, so it's important to be good stewards of our resources to the EDW is performant. Also, due to performance constraints in production, there should be checks on the amount of logic that can be realistically processed every day during the SLA window",Performance,1/1/19 0:00,TRUE,FALSE,TRUE,FALSE,Best Practice,Automated
7/13/23 7:35,joshua.adkins@healthcatalyst.cloud,Last Run Not Full SAM,,"Typically when a SAM moves to production, a full run should be done to confirm all changes worked as expected. If there is a partial run as the last run, it indicates perhaps changes were made after the last full SAM run.",It's ideal for a full SAM run to occur prior to any changes moving to production.,Production Readiness,1/1/19 0:00,TRUE,FALSE,TRUE,FALSE,Required,Automated
7/13/23 7:35,joshua.adkins@healthcatalyst.cloud,Only End Point SAM Entities Marked As Public,Only End Point SAM Entities May Be Marked As Public,"End point entities are currently Generic, Summary, or Reporting View SAM entities. Nothing else should be marked as public, as other SAMs should be not using intermediary entities.","Marking an entity public means it can be used by another SAM. We've made the decision at Allina that only ""end point"" entities should be used downstream (currently Generic, Summary, and Reporting View entities). Not allowing downstream SAMs/dashboards to reference intermediary tables in a SAM (i.e. metrics, pre-metrics, populations) will allow for easier maintenance of SAMs and less potential for unexpectedly breaking downstream dependencies. This way a SAM developer knows anything that isn't an end point is fair game to modify as they please, as long as they account for it in their SAM.",Design Conventions,1/1/19 0:00,TRUE,FALSE,TRUE,TRUE,Required,Automated
7/13/23 7:35,joshua.adkins@healthcatalyst.cloud,SAM Entities With Zero Bindings,,"It is possible to create an entity within SAMD, but then never create any bindings to load it.","If entities exist with no bindings, there is no purpose as they would always be empty. Allowing them to stay just creates opportunity for confusion in metadata or within the database objects (if they were loaded/populated at one time, but then bindings were deleted). These should be cleaned up in SAMs prior to moving to produciton, to ensure only active, utilized code is in production.",Production Readiness,1/1/19 0:00,TRUE,FALSE,TRUE,FALSE,Required,Automated
7/13/23 7:35,joshua.adkins@healthcatalyst.cloud,BindingID Index Should Be Disabled,BindingID Index Should Be Disabled For Entities With One Source Binding,"SAMD automatically creates a BindingID non-clustered index on every entity. This is not useful for entities with one source binding, as the BindingID value is the same for every column. It adds performance overhead to build this index, especially for large tables. Therefore it is best to disable it to improve performance and cut out the overhead. This can be done via SAMD on the index tab for each binding, by un-checking the ""active"" box. This has been raised to HC corporate, and future releases of SAMD may account for this automatically.","SAMD automatically creates a BindingID non-clustered index on every entity. This is not useful for entities with one source binding, as the BindingID value is the same for every column. It adds performance overhead to build this index, especially for large tables. Therefore it is best to disable it to improve performance and cut out the overhead. This can be done via SAMD on the index tab for each binding, by un-checking the ""active"" box. This has been raised to HC corporate, and future releases of SAMD may account for this automatically.",Performance,1/1/19 0:00,TRUE,FALSE,TRUE,FALSE,Required,Automated
7/13/23 7:35,joshua.adkins@healthcatalyst.cloud,Adhere to EDW naming conventions,,"All entitites and column names should adhere to EDW standard naming conventions, which include:

1. Be in CamelCase
2. Have a leading capital letter for each word.
3. Have an acceptable classword at the end of all column names
4. Minimal abbreviations in entity and column names
5. No special characters (- , _ , +,etc.)
6. Eliminate redundancies
7. Use singular versus plural
8. Use present tense versus past/future","Universally applied naming conventions aid with discovering and development, reducing the need to adjust to multiple methods of determining the form or function of data within an entity or a column.  It also presents the EDW as a unified product.",Naming Conventions,1/1/19 0:00,TRUE,TRUE,TRUE,FALSE,Required,Manual
7/13/23 7:35,joshua.adkins@healthcatalyst.cloud,Upstream SAM Developer Consultation,Upstream SAM Developer Should Be Consulted If Using Their SAM,"If you are referencing another developer's SAM, they should be kept in the loop so they are aware of it, and can provide guidance as needed. This may not apply to all upstream SAMs (such as any Shared SAMs).","If you are tying your SAM to another developer's SAM. It's important for them to be aware, so they know if they change their SAM what the downstream impacts might be. Also to consult with them so you can be sure you're using the data from their SAM in the appropriate way.",Appropriate Use,1/1/19 0:00,TRUE,FALSE,TRUE,FALSE,Required,Manual
7/13/23 7:35,joshua.adkins@healthcatalyst.cloud,Shared End Point Entities Marked As Public,Shared End Point Entities Must Be Marked As Public,Objects within Shared SAMs are expected to be used by other SAMs. Therefore they should always be marked as public from the get go.,"This reduces the risk of moving a Shared object to production and forgetting to mark it public. The issue would not arise until a SAM that is using it moves to production, and now can't be saved because the underlying Shared entity was later marked public in dev, but not in prod.",Shared,1/1/19 0:00,TRUE,FALSE,TRUE,FALSE,Required,Automated
7/13/23 7:35,joshua.adkins@healthcatalyst.cloud,Binding Type As Prefix For Entity Name,Entity Name Should Be Prefixed By Binding Type For Non End Point Entities,This check is to flag any bindings that does not have the binding type as a prefix for its binding name.,"As SAMs continue to grow in nature, creating delopment practices for framwork SAMs will allow an easier opportunity of identification, troubleshooting and maintenance. Attaching the binding type to the front of the binding name will help identify its place in a SAM's framework.",Naming Conventions,,FALSE,FALSE,TRUE,FALSE,Required,Automated
7/13/23 7:35,joshua.adkins@healthcatalyst.cloud,"Column, Schema or Table Names Must Not Contain Epic","Column, Schema or Table Names Should Not Contain Epic",,Avoid the word Epic in column names due to intellectual property concerns between Epic and Health Catalyst,Naming Conventions,,FALSE,TRUE,TRUE,FALSE,Required,Automated
7/13/23 7:35,joshua.adkins@healthcatalyst.cloud,Data Marts Have Metadata Description,Data Marts Must Have Overall Metadata Description Filled Out,"""Within SMD and SAMD there is an overall description field for a data mart. This should be filled out, at least including tags in the format below to capture business owner and primary/secondary support. Additional information describing the purpose/content of the data mart is welcomed. 

****************************** 

SAM Documentation 

****************************** 

[Business Owner / SME]: 

[Primary Support Contact]: 

[Secondary Support Contact]: 

****************************** ""","It's important to capture high level information about data marts, so we know what the origin/purpose is and who to reach out to if questions/issues arise.",Metadata,,TRUE,TRUE,TRUE,FALSE,Required,Automated
7/13/23 7:35,joshua.adkins@healthcatalyst.cloud,Designated Flag Column with Conflicting Datatype,"FLG columns should be textual, FlagNBR columns should be numeric","Columns ending in FLG"" should be of alpha character type. Columns denoting a flag and ending in ""NBR"" should be of integer type.""",Indicating the correct datatype and data content for flag type columns will provide users much clearer idea of the appropriate usage.,Naming Conventions,,FALSE,TRUE,TRUE,FALSE,Best Practice,Automated
7/13/23 7:35,joshua.adkins@healthcatalyst.cloud,End Point Entities Have Metadata Description,End Point Entities Have Metadata Description,"All end-point entities must have a metadata description filled out within SMD or SAMD. For Source Mart entities this includes everything that is not a History or Raw table. For SAMs this includes Summaries and Reporting Views, as well as all entities marked Public or in a Generic Framework SAM.","For tables designated queryable for end-users or reporting, it is ideal to have metadata filled out to clarify the meaning/logic/etc... behind each specific entity.",Metadata,,TRUE,TRUE,TRUE,FALSE,Required,Automated
7/13/23 7:35,joshua.adkins@healthcatalyst.cloud,End Point Entity Columns Have Metadata Description,End Point Entity Columns Have Metadata Description,,"For tables designated queryable for end-users or reporting, it is ideal to have metadata filled out to clarify the meaning/logic/etc... behind specific columns. If metadata is not available for a spefic column or a conscious decision has been made to not put a definition, text should be added to the column description explaining this is the case (i.e. No metadata definition provided.). """,Metadata,,FALSE,TRUE,TRUE,FALSE,Required,Automated
7/13/23 7:35,joshua.adkins@healthcatalyst.cloud,Framework SAM Template Should Be Used Over Generic,Framework SAM Template Should Be Used Over Generic,"When creating a SAM, there is an option to use a Generic type (no binding categories), or a Framework type (bindings are grouped by categories, such as Event, Rule, Population, Metric, Summary).","In most design cases it has been found that Framework based SAMs are more well organized, and clear what forms of business logic are happening at each level. Generic SAMs have a less intuitive view of relationships/dependencies between entities, and it is less clear which entities are intermediary steps, vs intended for public consumption. There may be some cases where a Generic SAM framework makes sense (i.e. a Shared SAM that only has a few simple summary entities). However, it is still recommended to start with a Framework in those cases, as you still have the option to simply create anything as a Summary type. Starting with a Framework SAM will make it much simplier to convert later if needed down the road.",Design,,FALSE,FALSE,TRUE,FALSE,Best Practice,Automated
7/13/23 7:35,joshua.adkins@healthcatalyst.cloud,Intermediary SAM Entities Have Clustered Unique Index,Intermediary SAM Entities Have Clustered Unique Index,"Intermediary entities are tables such as events, populations, metrics, and pre-metrics. While it's not required that they have a PK (or other unique clustered index), this is recommended as a best practice.",It's a good idea to have a primary key or clustered unique index added to all persisted entities to ensure the grain of the data is as expected.,Constraints,,FALSE,FALSE,TRUE,FALSE,Best Practice,Automated
7/13/23 7:35,joshua.adkins@healthcatalyst.cloud,Intermediary SAM Entities Have Metadata Description,Intermediary SAM Entities Have Metadata Description,"All end-point entities in SAMs are required to have metadata descriptions filled out. For non-end point entities (events, populations, pre-metrics, metrics) metadata is not required. Though it still is recommended and may be useful in explaining what given entities do, why they're there, etc..","It may be useful to capture purpose, business logic, etc...of intermediary entities. Especially if a new developer takes over or needs to troubleshoot a SAM they did not develop.",Metadata,,TRUE,FALSE,TRUE,FALSE,Required,Automated
7/13/23 7:35,joshua.adkins@healthcatalyst.cloud,Potential Sensitive Columns in Binding,Potential Sensitive Columns in Binding,This check triggers any columns that can potentially be sensitve to user exposure or may contain PHI data.,PHI data must only be disclosed when necessary along with sensitive columns that may have restrictions from the source. Update the test in the background to check source marts,,,FALSE,FALSE,TRUE,FALSE,Required,Automated
7/13/23 7:35,joshua.adkins@healthcatalyst.cloud,Source Mart Data Steward Involvement,Data Stewards Should Be Consulted For Any Source Mart Data Used,"If you are using data from a source mart in your SAM. The data steward for that source mart should be informed and give approval for your use case, who you are ultimately exposing the data to (via dashboard, cube, report, etc..), and whether the data is being used in the correct way. Certain source marts may be excluded from this check, as they don't have one clear data steward (Epic), or have been deemed ok for anyone to use with low risk/scrutiny. Certain Source Marts have sensitive data, and you need to be careful of using data from those even indirectly via another SAM (e.g. Payroll). This is not currently audited, but discussions are in the works to discuss how to audit/flag usage of sensitive data through a chain of SAMs.","Source mart data stewards have a stake in making sure their data is used correctly/appropriately, and only exposed to the right people. Some source marts, such as HR data, contain very sensitive information, and it's important proper security channels are setup with regards to who might be exposed to this data through a dashboard, cube, report, etc...",Security,,FALSE,FALSE,TRUE,FALSE,Best Practice,Automated
7/13/23 7:35,joshua.adkins@healthcatalyst.cloud,Source Mart Tables Must Have EDWLastModifiedDTS Column,Source Mart Tables Must Have EDWLastModifiedDTS Column,All source mart tables must have an EDWLastModifiedDTS column added. Typically to the end of their binding SQL using a getdate() function.,This ensures that it's clear when any record was last inserted/updated within the EDW.,Source Marts,,FALSE,TRUE,FALSE,FALSE,Required,Automated
7/13/23 7:35,joshua.adkins@healthcatalyst.cloud,Source to Target Inappropriate Data Type,Source to Target Inappropriate Data Type,To help validate the appropriate data type usage for the corresponding source.,Assigning the appropriate data type per the source column will help prevent load errors where the size or scale of the target datatype is insufficient. This will also align with Health Catalyst source mart standards.,Design Conventions,,FALSE,TRUE,FALSE,FALSE,Required,Automated
7/13/23 7:35,joshua.adkins@healthcatalyst.cloud,Verify No Obsolete Source Mart Entities Exist,Verify No Obsolete Source Mart Entities Exist,"There is a SQL statement that can be run for a source mart to determine if any obsolete entities exist. This should be manually run to verify, and if necessary delete entities that are no longer needed.",It is important to keep the environment clean of obsolete objects to reduce noise and avoid the risk confusion.,Cleanup,,FALSE,TRUE,FALSE,FALSE,Required,Manual
7/13/23 7:35,joshua.adkins@healthcatalyst.cloud,Unrecognized Acronyms,Acronyms should generally be avoided in names,"In an effort to provide a knowledge base of recognized and approved acronyms, this check will flag any acronyms that has not been cleared for usage.",To prevent incorrect or unrecognizable acronyms and align with Health Catalyst Standards.,Naming Conventions,,FALSE,TRUE,TRUE,FALSE,Best Practice,Automated
7/13/23 7:35,joshua.adkins@healthcatalyst.cloud,Unrecognized Suffix for End Point Entities,Only standard suffix words should be used for End Point Entities,"In an effort to provide a knowledge base of recognized and approved suffixes, this check will flag any suffixthat has not been cleared for usage.",To prevent incorrect or unrecognizable suffixes.,Naming Conventions,,FALSE,TRUE,TRUE,FALSE,Best Practice,Automated
7/13/23 7:35,joshua.adkins@healthcatalyst.cloud,Unrecognized Suffix for Non-End Point Entities,Only standard suffix words should be used for Non End Point Entities,"In an effort to provide a knowledge base of recognized and approved suffixes, this check will flag any suffixthat has not been cleared for usage.",To prevent incorrect or unrecognizable suffixes.,Naming Conventions,,FALSE,FALSE,TRUE,FALSE,Best Practice,Automated
7/13/23 7:35,joshua.adkins@healthcatalyst.cloud,Minimal renaming of columns within SAMs,Minimal renaming of columns within SAMs,"Column names should transform as little as possible as they come from the sources and are brought through the SAM, unless there is transformation, filtering or aggregation on the field.","Currently the HC tools do not track column level lineage as data transforms through the processes. By keeping column names intact when the data represented in source and destination is the same, we aid in discovery, development and tracing data errors.",Naming Conventions,,FALSE,FALSE,TRUE,FALSE,Best Practice,Manual
7/13/23 7:35,joshua.adkins@healthcatalyst.cloud,"Keep Event, Rule, and Population entities narrow","Keep Event, Rule, and Population entities narrow","Events/Rules/Populations should only bring in fields that identify unique values in their population, or are needed for direct joins within downstream metrics. 

Events/Rules/Populations should not bring in fields purely for the intention of carrying them through to the Summary level (i.e. to avoid having to join back to the same tables later)","Keeping the bindings and entities as streamlined as possible will aid in troubleshooting and lineage. Additionally, limiting the data that is brought from entities to entities will have a positive effect on ETL run time.",Design Conventions,,FALSE,FALSE,TRUE,FALSE,Best Practice,Manual
7/13/23 7:35,joshua.adkins@healthcatalyst.cloud,"Keep business logic in SAM, not in reporting tool","Keep business logic in SAM, not in reporting tool","In general, business logic should be included within a SAM, rather than coded in dashboards/reports that reference the SAM. The exceptions to this include very basic filters on timeframe, or population criteria (such as excluding affiliates).

Business logic with wider use cases than just one SAM/dashboard may be appropriate to house within the Shared database 

SAM developers should make an effort to be generally aware of business logic that already exists in the Shared database, or public SAM entities, and consider using it were appropriate, rather than rewriting similar or identical logic within their SAM","The transformations done to data through SAM are more transparent to other parties than if the business logic resides in a more narrow tool. 

Additionally, we would have more success exporting SAMs to other clients who may have elected to use different reporting tools than used at Allina. 

Finally, as SAM entities may be consumed by more than just a single dashboard, we want to make sure that transformations expected by the business owners are in places where all developers can leverage and be aware of them, so that analytics are standardized.",Design Conventions,,FALSE,FALSE,TRUE,FALSE,Best Practice,Manual
7/13/23 7:35,joshua.adkins@healthcatalyst.cloud,SAMs should not contain certain sensitive data hard coded into the SAM,SAMs should not contain certain sensitive data hard coded into the SAM,"SAMs should not contain sensitive patient information (such as patient name, patient address, social security number) or provider/employee information (such as home address, social security number).","SAMs should not contain sensitive patient information (such as patient name, patient address, social security number) or provider/employee information (such as home address, social security number). None of this data is supposed to be used in Allina analytics, so there should be no reason to bring it into a SAM. Valid exceptions can be discussed if necessary.",Security,,FALSE,FALSE,TRUE,FALSE,Required,Manual
7/13/23 7:35,joshua.adkins@healthcatalyst.cloud,SAM Peer Review,SAM Peer Review Must Be Conducted,"Is a peer review required? 
- Peer reviews should be completed on SAMs developed by staff new to SAM-D (i.e. for first three SAMs developed).
- Peer reviews aren’t required on SAMs developed by experienced SAM-D developers (i.e. have developed three SAMs). However, developers can ask for a peer review or consultation from another developer as often as needed. A peer review is recommended when the SAM doesn’t follow the standard framework pattern, requires an addition of new concepts, or there are any questions about general supportability (so, if something breaks, other team members can address). When in doubt, ask for a peer review.

Who can perform a peer review?
- Anyone trained on SAM, who is familiar with the SAM standards at Allina, and who has developed at least three SAMs can perform a peer review.
- To request a peer review, reach out to a specific experienced SAM-D developer, email the BI distribution list, or consult with your lead.",,Review,,FALSE,FALSE,TRUE,FALSE,Required,Manual
7/13/23 7:35,joshua.adkins@healthcatalyst.cloud,VIP Records Should Be Appropriately Handled,VIP Records Should Be Appropriately Handled,"Where relevant, SAMs should not include VIP data if it exists.",Crossover's EMR contains VIP data for organizations that are not owned by Crossover but have an agreement to share data with Crossover. This data is allowed to be shared with certain Crossover employees. In many querying and reporting use cases logic will need to be added to exclude VIP client data before data is presented to Crossover employees. There are other cases where reporting is done for VIP users and filtering needs to be done to only contain data for a specific client.,Security,,FALSE,TRUE,TRUE,TRUE,Best Practice,Manual
7/13/23 7:35,joshua.adkins@healthcatalyst.cloud,Payor's Claims Datasets Should Be Stored At The Appropriate Grain,Payor's Claims Datasets Should Be Stored At The Appropriate Grain,Certain payer's claims data should be at the appropriate aggregation,Crossover fill out,,,TRUE,FALSE,FALSE,TRUE,Best Practice,Manual
7/13/23 7:35,joshua.adkins@healthcatalyst.cloud,SwitchDTS Must Be Used Correctly,SwitchDTS Must Be Used Correctly,The field SwitchDTS must be appropriately handled in queries that rely on it,Crossover fill out,Design Conventions,,FALSE,FALSE,TRUE,TRUE,Required,Manual
7/13/23 7:35,joshua.adkins@healthcatalyst.cloud,SAM Must Be Exported To Code Repository,SAM Must Be Exported to Code Repository,"Before moving the SAM into production, it must be exported along with any other related files, to the correct code repository",SAMs that are source controlled have better change management guardrails,Review,,FALSE,FALSE,TRUE,FALSE,Required,Manual
7/13/23 7:35,joshua.adkins@healthcatalyst.cloud,All Scripts and Queries Must Have a Standard Header,All Scripts and Queries Must Have a Standard Header,All scripts and queries must include standard fields such as the SAM author and last update by,To enable better change management,Design Conventions,,TRUE,FALSE,TRUE,TRUE,Required,Automated
7/13/23 7:35,joshua.adkins@healthcatalyst.cloud,Tableau Data Sources Must Be Named Correctly,Tableau Data Sources Must Be Named Correctly,Name Tableau data sources the same as the SAM,Crossover fill out,Naming Conventions,,FALSE,FALSE,TRUE,TRUE,Required,Manual
7/13/23 7:35,joshua.adkins@healthcatalyst.cloud,DOS Mart metrics must be used before recreating a metric in a SAM,DOS Mart metrics must be used before recreating a metric in a SAM,"DOS Mart data attributes and metrics should be used whenever possible, rather than duplicating source data and calculating a new version of an existing metric ",We run the risk of duplicating code or creating inaccurate or invalid metrics when we don’t utilize logic already created in Shared or Shared Local marts,Design Conventions,,TRUE,FALSE,TRUE,FALSE,Required,Manual
7/13/23 7:35,joshua.adkins@healthcatalyst.cloud,Shared and Shared Local DOS Marts must be used before EMR source tables ,Shared and Shared Local DOS Marts must be used before EMR source tables ,Shared and Shared Local DOS Marts must be used before EMR source tables unless an equivalent does not exist,"Shared and shared local are validated before moving to production, this approach will minimize validation on timelines for validation",Design Conventions,,TRUE,FALSE,TRUE,FALSE,Required,Automated
7/13/23 7:35,joshua.adkins@healthcatalyst.cloud,All applications that display quality measures must include the NCQA disclaimer,All applications that display quality measures must include the NCQA disclaimer,"None of the logic used to produce measure results from [this system] has been certified by NCQA. NCQA specifications provided in [this system] are for reference only and are not an indication of measure validity produced by [the system]. A measurement rate from a HEDIS measure specification does not constitute a HEDIS rate until it is audited and approved by an NCQA-certified HEDIS Compliance Auditor. Until such time, measure rates produced by [this system] shall not be designated or referred to as a HEDIS rate or HEDIS result for any purpose. ",If an application displays quality measures without the NCQA disclaimer then Health Catalyst is in breach of contract with NCQA and individuals can be held liable. Note that this only applies to for-profit organizations,Legal,,FALSE,FALSE,TRUE,FALSE,Required,Manual
7/13/23 7:35,joshua.adkins@healthcatalyst.cloud,Use DISTINCT only if necessary,Use DISTINCT only if necessary,"The DISTINCT function should be used sparingly. It can often be avoided by adding a more specific condition to a join, or by using a windowed function that assigns a 1 to the desired row, with a downstream filter.",The DISTINCT function slows query performance.,SQL Conventions,6/23/20 0:00,TRUE,FALSE,TRUE,FALSE,Required,Manual
7/13/23 7:35,joshua.adkins@healthcatalyst.cloud,Specify desired columns in the Select statement,Specify desired columns in the Select statement,Query contains SELECT * - Replace * with the desired column names.,"Only the desired columns should be selected. Even if all columns are desired, they should be listed explicitly",SQL Conventions,6/25/20 0:00,TRUE,FALSE,TRUE,FALSE,Required,Automated
7/13/23 7:35,joshua.adkins@healthcatalyst.cloud,Use UNION ALL before UNION if possible,Use UNION ALL before UNION if possible,Query contains UNION - UNION ALL is preferred if it still returns the desired results,Union slows performance as it identifies duplicates,SQL Conventions,6/25/20 0:00,TRUE,FALSE,TRUE,FALSE,Required,Manual
7/13/23 7:35,joshua.adkins@healthcatalyst.cloud,Differences Between Dev and Prod,Differences Between Dev and Prod,This pulls all bindings that have been modified from what currently exists in prod so we can make sure all changes have gone through the proper approval prior to promotion.,It's easy for developers to lose track of changes as work is done. This check is put in place to ensure we have reviewed and understand all changes prior to being promoted.,,10/6/20 0:00,TRUE,FALSE,TRUE,FALSE,Best Practice,Manual
7/13/23 7:35,joshua.adkins@healthcatalyst.cloud,Columns Not Referenced Downstream,Columns Not Referenced Downstream,All columns in a non-public binding should be referenced in a downstream binding,We would like to reduce the number of unnecessary columns to improve overall speed.,SQL Conventions,4/1/21 0:00,TRUE,FALSE,TRUE,FALSE,Best Practice,Manual
7/13/23 7:35,joshua.adkins@healthcatalyst.cloud,"CTEs must be referenced in the query and contain a PARTITION, GROUP BY, CROSS JOIN, CROSS APPLY or UNION",,"CTEs must be referenced after their creation in the query. CTEs must also contain contain a PARTITION, GROUP BY, CROSS JOIN, CROSS APPLY or UNION, or be combined with the outer query.",Unnecessary CTEs can slow query performance.,Performance,,TRUE,FALSE,TRUE,FALSE,Required,Automated
7/13/23 7:35,joshua.adkins@healthcatalyst.cloud,DISTINCT Keyword In Query Does Not Affect Rowcounts,DISTINCT Keyword In Query Does Not Affect Rowcounts,"DISTINCT keyword should only be used when necessary, if queries return the same rows when DISTINCT is removed it is most likely unnecessary.

Note: this audit runs overnight, once per day (because it must actually run the queries to measure the rowcount it is much slower). Therefore, refactored DISTINCT queries will be updated in the Code Review Tool on the following day.","DISTINCT causes the database to do extra work when it filters out duplicate records, slowing down queries.",Performance,8/23/21 0:00,TRUE,FALSE,TRUE,FALSE,Required,Automated
7/13/23 7:35,joshua.adkins@healthcatalyst.cloud,Incremental Opportunity,Incremental Opportunity,Binding contains source bindings that are incremental.  Consider changing binding type to Incremental.,Reduce server load by running incrementally.,Performance,9/1/21 0:00,TRUE,FALSE,TRUE,FALSE,Best Practice,Manual
7/13/23 7:35,joshua.adkins@healthcatalyst.cloud,UNION Returns Same Rowcount as UNION ALL,UNION Returns Same Rowcount as UNION ALL,"Combining result sets with UNION is an expensive operation because the Database Engine must scan through both sets and search for duplicate rows, even if none exist.  If no duplicates exist, then UNION ALL will achieve the same results almost instantly because there is not searching for duplicate records.

Note: this audit runs overnight, once per day (because it must actually run the queries to measure the rowcount it is much slower).  Therefore, refactored UNION queries will be updated in the Code Review Tool on the following day.","If there are no duplicate records to filter out, UNION ALL is much faster than UNION when combining two result sets.",Performance,9/3/21 0:00,TRUE,FALSE,TRUE,FALSE,Required,Automated
7/13/23 7:35,joshua.adkins@healthcatalyst.cloud,Appropriate Grain Designated,Appropriate Grain Designated,The name of the column that identifies the grain of the binding (for bindings with primary keys) should be input as the grain (ex: EncounterID instead of Encounter),To clearly identify what the grain of the binding is and what constitutes the primary key. Exceptions may include the Summary Metric where the SecurityFLG is part of the grain but it doesn't need to be included in the grain description.,Design Conventions,8/27/20 0:00,TRUE,FALSE,TRUE,FALSE,Required,Automated
7/13/23 7:35,joshua.adkins@healthcatalyst.cloud,Avoid Wildcard String Searches,Avoid Wildcard String Searches,"String searches with wildcards (like '%diabetes%') are avoided where possible; in cases where they're necessary, another binding is utilized to store the logic.",String searches are less performant than searches done using codes (that can be indexed).,Performance,8/27/20 0:00,TRUE,FALSE,TRUE,FALSE,Best Practice,Automated
7/13/23 7:35,joshua.adkins@healthcatalyst.cloud,GROUP BY Should be Used With an Aggregate Function,GROUP BY Should be Used With an Aggregate Function,,,Design Conventions,9/20/21 0:00,FALSE,FALSE,TRUE,FALSE,Best Practice,Automated
7/13/23 7:35,joshua.adkins@healthcatalyst.cloud,Schema Name Should Not Be In the Table Name,Schema Name Should Not Be Repeated In the Table Name,"The name of the schema should not be repeated within a table name. For example, SAM.Sepsis.SepsisEventDiagnosis is incorrect while SAM.Sepsis.EventDiagnosis is correct",Health Catalyst's EDW naming standards prohibit redundancy,Naming Conventions,6/25/20 0:00,TRUE,FALSE,TRUE,FALSE,Required,Automated